{"version":3,"sources":["../server-src/app.js"],"names":[],"mappings":";;AAEA,4B;AACA,0B;AACA,uC;AACA,+C;AACA,qC;AACA,uC;AACA,yC;AACA,mC;AACA,uC;AACA,uC;AACA,uC,0IAZA,QAAQ,GAAR,CAAY,QAAZ,GAAuB,QAAQ,GAAR,CAAY,QAAZ,IAAwB,aAA/C;;AAcA,IAAM,MAAM,mBAAZ;AACA,IAAM,SAAS,yBAAf;;AAEA;AACA,IAAI,GAAJ,CAAQ,8BAAR;AACA,IAAI,GAAJ,CAAQ,wBAAR;AACA,IAAI,GAAJ,CAAQ,0BAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,yBAAU,eAAK,IAAL,CAAU,SAAV,EAAqB,WAArB,CAAV,CAAR;;AAEA;AACA,IAAI,GAAJ,CAAQ,wBAAM,eAAK,IAAL,CAAU,SAAV,EAAqB,UAArB,CAAN,EAAwC;AAC9C,aAAW,MADmC,EAAxC,CAAR;;;AAIA;AACA,IAAI,GAAJ,oFAAQ,iBAAO,GAAP,EAAY,IAAZ;;AAEE,oBAFF;;AAIJ,gBAAG,YAAI,MAAJ,KAAe,GAAlB,EAAuB;AACrB,kBAAI,IAAJ,GAAW,EAAE,SAAS,sBAAX,EAAX;AACA,kBAAI,MAAJ,GAAa,GAAb;AACD,aAHD,MAGO;AACL,kBAAI,IAAJ,GAAW,EAAE,SAAS,YAAI,OAAf,EAAX;AACA,kBAAI,MAAJ,GAAa,YAAI,MAAJ,IAAc,GAA3B;AACD,aAVG,6EAAR;;;;AAcA;AACA,OAAO,GAAP,CAAW,GAAX,EAAgB,gBAAM,MAAN,EAAhB,EAAgC,gBAAM,cAAN,EAAhC;AACA,OAAO,GAAP,CAAW,QAAX,EAAqB,gBAAM,MAAN,EAArB,EAAqC,gBAAM,cAAN,EAArC;;AAEA,IAAI,GAAJ,CAAQ,OAAO,MAAP,EAAR;;AAEA,IAAI,EAAJ,CAAO,OAAP,EAAgB,UAAS,GAAT,EAAc,GAAd,EAAkB;AAChC,UAAQ,GAAR,CAAY,GAAZ;AACA,sBAAO,KAAP,CAAa,cAAb,EAA6B,GAA7B,EAAkC,GAAlC;AACD,CAHD,E;;AAKe,G","file":"app.js","sourcesContent":["process.env.NODE_ENV = process.env.NODE_ENV || 'development'\n\nimport path from 'path'\nimport Koa from 'koa'\nimport Router from 'koa-router'\nimport bodyParser from 'koa-bodyparser'\nimport views from 'koa-views'\nimport koaStatic from 'koa-static'\nimport convert from 'koa-convert'\nimport json from 'koa-json'\nimport logger from 'koa-logger'\nimport index from './routes/index'\nimport about from './routes/about'\n\nconst app = new Koa()\nconst router = new Router()\n\n//middlewares\napp.use(bodyParser())\napp.use(json()) \napp.use(logger())\n\n// static\napp.use(koaStatic(path.join(__dirname, '../client')))\n\n// views\napp.use(views(path.join(__dirname, '../views'), {\n  extension: 'jade'\n}))\n\n// response\napp.use(async (ctx, next) => {\n  try {\n    await next()\n  } catch(err) {\n    if(err.status === 401) {\n      ctx.body = { message: 'Unauthorized access.' }\n      ctx.status = 401\n    } else {\n      ctx.body = { message: err.message }\n      ctx.status = err.status || 500\n    }\n  }\n})\n\n//router\nrouter.use('/', index.routes(), index.allowedMethods())\nrouter.use('/about', about.routes(), about.allowedMethods())\n\napp.use(router.routes())\n\napp.on('error', function(err, ctx){\n  console.log(err)\n  logger.error('server error', err, ctx)    \n})\n\nexport default app"]}